(()=>{"use strict";var e={785:(e,t,n)=>{e.exports=n.p+"f6a972e245003b420821.jpg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.p="",(()=>{var e=".profile__edit-avatar",t=".profile__edit-button",r=".profile__title",o=".profile__subtitle",i=".profile__avatar",a=".profile__add-button",c=".popup__form",u=".popup__button",s=".popup__image",l=".popup__figcaption",f={confirmation:".popup_function_confirmation",editProfile:".popup_function_edit-profile",addCard:".popup_function_add-card",viewPhoto:".popup_function_view-photo",editAvatar:".popup_function_edit-avatar"},d="popup",h="popup__close-button",p="popup_opened",_=".form__input",v=".form__button",y=".form__error-msg",m="form__error-msg_visible",b={name:"#name",about:"#profession",link:"#link",avatar:"#pic"},k=".cards__list",g=".cards__item",E=".cards__image",S=".cards__name",C=".cards__status",w=".cards__likes",L=".cards__delete-button",P="cards__delete-button_visible",I="cards__status_active",O="cards__image_inactive",B="#cards-template",q={formSelector:c,inputSelector:_,submitButtonSelector:v,inactiveButtonClass:"form__button_disabled",inputErrorClass:"form__input_error",errorClass:m,errorMsgPrefix:"error"},j={preloaderElement:document.querySelector(".preloader"),cardsContainer:document.querySelector(k),cardsTemplate:document.querySelector(B),profileName:document.querySelector(r),profileProfession:document.querySelector(o),avatarImage:document.querySelector(i),editAvatarButton:document.querySelector(e),editProfileButton:document.querySelector(t),addCardButton:document.querySelector(a),deleteCardButton:document.querySelector(L),editAvatarPopup:document.querySelector(f.editAvatar),editProfilePopup:document.querySelector(f.editProfile),addCardPopup:document.querySelector(f.addCard),confirmationPopup:document.querySelector(f.confirmation),modalShowPhoto:document.querySelector(f.viewPhoto),modalImageElement:document.querySelector(s),modalTextElement:document.querySelector(l)},A={editProfile:j.editProfilePopup.querySelector(c),addCard:j.addCardPopup.querySelector(c),editAvatar:j.editAvatarPopup.querySelector(c)},R=(A.editProfile.querySelector(v),A.addCard.querySelector(v),A.editAvatar.querySelector(v),j.confirmationPopup.querySelector(u),{inputProfileName:A.editProfile.querySelector(b.name),inputProfileAbout:A.editProfile.querySelector(b.about),inputAvatar:A.editAvatar.querySelector(b.avatar)}),x=n(785);function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t,n){var r=t.data,o=t.handleCardClick,i=t.handleDeleteButtonClicked,a=t.handleLikeButtonClick,c=t.userId;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=r,this._handleCardClick=o,this._handleDeleteButtonClicked=i,this._handleLikeButtonClick=a,this._selector=n,this._userId=c,this._handleImageClick=this._handleImageClick.bind(this),this._handleErrorImageLoad=this._handleErrorImageLoad.bind(this)}var t,n;return t=e,(n=[{key:"_getElement",value:function(){return document.querySelector(this._selector).content.querySelector(g).cloneNode(!0)}},{key:"_handleImageClick",value:function(){this._handleCardClick(this._data)}},{key:"_handleErrorImageLoad",value:function(){this._cardImage.src=x,this._cardImage.classList.add(O),this._cardImage.removeEventListener("click",this._handleImageClick)}},{key:"_setEventListeners",value:function(){var e=this;this._cardImage.addEventListener("click",this._handleImageClick),this._cardImage.addEventListener("error",this._handleErrorImageLoad),this._cardLikeButton.addEventListener("click",(function(){e._handleLikeButtonClick(e._data._id,e._cardLikeButton,e._cardLikesCount)})),this._data.owner._id===this._userId&&(this._deleteButton.classList.add(P),this._deleteButton.addEventListener("click",(function(){e._handleDeleteButtonClicked(e._data._id)})))}},{key:"_hasMyLike",value:function(){var e=this,t=!1;return this._data.likes.forEach((function(n){n._id===e._userId&&(t=!0)})),t}},{key:"_generate",value:function(){this._cardImage=this._cardElement.querySelector(E),this._cardLikeButton=this._cardElement.querySelector(C),this._cardLikesCount=this._cardElement.querySelector(w),this._deleteButton=this._cardElement.querySelector(L),this._cardImage.src=this._data.link,this._cardImage.alt=this._data.name,this._cardElement.id=this._data._id,this._cardElement.querySelector(S).textContent=this._data.name,this._hasMyLike()&&this._cardLikeButton.classList.add(I),this._data.likes.length>0&&(this._cardLikesCount.textContent=this._data.likes.length)}},{key:"createCard",value:function(){return this._cardElement=this._getElement(),this._generate(),this._setEventListeners(),this._cardElement}}])&&T(t.prototype,n),e}(),D=function(e,t){if(e.json)e.json().then((function(e){console.error(e.message)}));else{if("console"!==t){var n=Array.from(t.querySelectorAll(y));return n[n.length-1].textContent="Что-то пошло не так... :( Попробуйте еще раз.",n[n.length-1].classList.add(m),Promise.reject(e)}console.error("Что-то пошло не так... :( Попробуйте еще раз.")}};function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=t,this.changeUserInfo=this.changeUserInfo.bind(this),this.editAvatar=this.editAvatar.bind(this),this.postCard=this.postCard.bind(this)}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject(e)}},{key:"getUserInfo",value:function(){return fetch("".concat(this.options.baseUrl,"/users/me"),{headers:this.options.headers}).then(this._checkResponse)}},{key:"changeUserInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this.options.baseUrl,"/users/me"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({name:t,about:n})}).then(this._checkResponse)}},{key:"editAvatar",value:function(e){var t=e.avatar;return fetch("".concat(this.options.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.options.headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"getCards",value:function(){return fetch("".concat(this.options.baseUrl,"/cards"),{headers:this.options.headers}).then(this._checkResponse)}},{key:"postCard",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this.options.baseUrl,"/cards"),{method:"POST",headers:this.options.headers,body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this.options.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this.options.headers}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this.options.baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this.options.headers}).then(this._checkResponse)}},{key:"removeLike",value:function(e){return fetch("".concat(this.options.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this.options.headers}).then(this._checkResponse)}}])&&H(t.prototype,n),e}();function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t){var n,r,o=this,i=t.nameSelector,a=t.aboutSelector,c=t.avatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=function(){o._avatarEl.src=o._avatar,o._avatarEl.alt="Аватар пользователя ".concat(o._name)},(n="_renderUserAvatar")in this?Object.defineProperty(this,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):this[n]=r,this._nameEl=document.querySelector(i),this._aboutEl=document.querySelector(a),this._avatarEl=document.querySelector(c)}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._name,about:this._about,avatar:this._avatar,_id:this._id}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about,r=e.avatar,o=e._id;this._name=t,this._about=n,this._id=o,this._avatar=r,this._renderUserInfo(),this._renderUserAvatar()}},{key:"_renderUserInfo",value:function(){this._nameEl.textContent=this._name,this._aboutEl.textContent=this._about}}])&&M(t.prototype,n),e}();function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var F=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"_clear",value:function(){this._container.innerHTML=""}},{key:"addItem",value:function(e){var t=this._renderer(e);this._container.prepend(t)}},{key:"renderItems",value:function(){var e=this;this._clear(),this._data.reverse().forEach((function(t){e.addItem(t)}))}}])&&J(t.prototype,n),e}();function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.popupElement=document.querySelector(t),this._clickPopupHandler=this._clickPopupHandler.bind(this),this._handleEscClose=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this.popupElement.classList.add(p),this.setEventListeners()}},{key:"close",value:function(){this.popupElement.classList.remove(p),this.removeEventListeners()}},{key:"_clickPopupHandler",value:function(e){var t=e.target.classList.contains(h);(e.target.classList.contains(d)||t)&&this.close(e.currentTarget)}},{key:"_handleEscClose",value:function(e){"Escape"===e.code&&this.close()}},{key:"setEventListeners",value:function(){this.popupElement.addEventListener("click",this._clickPopupHandler),document.addEventListener("keydown",this._handleEscClose)}},{key:"removeEventListeners",value:function(){this.popupElement.removeEventListener("click",this._clickPopupHandler),document.removeEventListener("keydown",this._handleEscClose)}}])&&z(t.prototype,n),e}();function G(e){return G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},G(e)}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return W="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},W(e,t,n||e)}function X(e,t){return X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},X(e,t)}function Y(e,t){if(t&&("object"===G(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Z(e)}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(r);if(o){var n=ee(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Y(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._form=n.popupElement.querySelector(c),n._submitButton=n._form.querySelector(v),n._defualtSubmitButtonText=n._submitButton.textContent,n._submitFormHandler=t,n._handleSubmit=n._handleSubmit.bind(Z(n)),n._setButtonState=n._setButtonState.bind(Z(n)),n._inputs=n._form.querySelectorAll(_),n}return t=a,(n=[{key:"_setButtonState",value:function(e){this._submitButton.disabled=e,this._submitButton.textContent=e?"Загрузка...":this._defualtSubmitButtonText}},{key:"_getInputValues",value:function(){var e,t={},n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw i}}}}(this._inputs);try{for(n.s();!(e=n.n()).done;){var r=e.value;t[r.name]=r.value}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"_handleSubmit",value:function(e){var t=this;e.preventDefault();var n=this._getInputValues();this._setButtonState(!0),this._submitFormHandler(n).then((function(){return t.close()})).finally((function(){t._setButtonState(!1)}))}},{key:"setEventListeners",value:function(){W(ee(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",this._handleSubmit)}},{key:"removeEventListeners",value:function(){W(ee(a.prototype),"removeEventListeners",this).call(this),this._form.removeEventListener("submit",this._handleSubmit)}},{key:"close",value:function(){W(ee(a.prototype),"close",this).call(this),this._form.reset()}}])&&Q(t.prototype,n),a}($);function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return oe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ce(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},oe(e,t,n||e)}function ie(e,t){return ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},ie(e,t)}function ae(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ce(e){return ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ce(e)}var ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ce(r);if(o){var n=ce(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ae(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._image=t.popupElement.querySelector(s),t._text=t.popupElement.querySelector(l),t}return t=a,(n=[{key:"open",value:function(e){oe(ce(a.prototype),"open",this).call(this),this._image.src=e.link,this._image.alt=e.name,this._text.textContent=e.name}}])&&re(t.prototype,n),a}($);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var le=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._validityConfig=t,this._formElement=n,this._inputList=Array.from(this._formElement.querySelectorAll(this._validityConfig.inputSelector)),this._buttonElement=this._formElement.querySelector(this._validityConfig.submitButtonSelector)}var t,n;return t=e,(n=[{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonActivity(),this._inputList.forEach((function(t){e._hideError(t)}))}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonActivity()}))}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideError(e):this._showError(e)}},{key:"_toggleButtonActivity",value:function(){this._hasInvalidInput()?(this._buttonElement.classList.add(this._validityConfig.inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._validityConfig.inactiveButtonClass),this._buttonElement.disabled=!1)}},{key:"_hasInvalidInput",value:function(){return!this._inputList.every((function(e){return e.validity.valid}))}},{key:"_hideError",value:function(e){var t=this._formElement.querySelector("#".concat(e.name,"-").concat(this._validityConfig.errorMsgPrefix));e.classList.remove(this._validityConfig.inputErrorClass),t.textContent="",t.classList.remove(this._validityConfig.errorClass)}},{key:"_showError",value:function(e){var t=this._formElement.querySelector("#".concat(e.name,"-").concat(this._validityConfig.errorMsgPrefix));e.classList.add(this._validityConfig.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._validityConfig.errorClass)}}])&&se(t.prototype,n),e}();function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function he(e,t,n){return he="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ye(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}},he(e,t,n||e)}function pe(e,t){return pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},pe(e,t)}function _e(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ve(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}var me,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ye(r);if(o){var n=ye(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return _e(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._cardId="",n._submitButton=n.popupElement.querySelector(u),n._submitConfirmHandler=t,n._handleSubmit=n._handleSubmit.bind(ve(n)),n}return t=a,(n=[{key:"open",value:function(e){he(ye(a.prototype),"open",this).call(this),this._cardId=e}},{key:"_handleSubmit",value:function(){var e=this;this._submitConfirmHandler(this._cardId).then((function(){return e.close()}))}},{key:"setEventListeners",value:function(){he(ye(a.prototype),"setEventListeners",this).call(this),this._submitButton.addEventListener("click",this._handleSubmit)}},{key:"removeEventListeners",value:function(){he(ye(a.prototype),"removeEventListeners",this).call(this),this._submitButton.removeEventListener("click",this._handleSubmit)}}])&&de(t.prototype,n),a}($),ke=new V({baseUrl:"https://nomoreparties.co/v1/plus-cohort-3",headers:{authorization:"27fae40c-b0f9-46c9-bf33-d2f2bfaeebe1","Content-Type":"application/json"}}),ge=new N({nameSelector:r,aboutSelector:o,avatarSelector:i},ke),Ee=new te(f.editProfile,(function(e){return ke.changeUserInfo(e).then((function(e){return ge.setUserInfo(e)})).catch((function(e){return D(e,A.editProfile)}))})),Se=new te(f.editAvatar,(function(e){return ke.editAvatar(e).then((function(e){return ge.setUserInfo(e)})).catch((function(e){return D(e,A.editAvatar)}))})),Ce=new ue(f.viewPhoto),we=new be(f.confirmation,(function(e){return ke.deleteCard(e).then((function(){document.getElementById(e).remove()})).catch((function(e){return D(e,"console")}))})),Le=new te(f.addCard,(function(e){return ke.postCard(e).then((function(e){return me.addItem(e)})).catch((function(e){return D(e,A.addCard)}))})),Pe=new le(q,A.editProfile);Pe.enableValidation();var Ie=new le(q,A.editAvatar);Ie.enableValidation();var Oe=new le(q,A.addCard);Oe.enableValidation(),Promise.all([ke.getUserInfo(),ke.getCards()]).then((function(e){ge.setUserInfo(e[0]);var t=ge.getUserInfo()._id;(me=new F({items:e[1],renderer:function(e){return new U({data:e,userId:t,handleCardClick:function(e){Ce.open(e)},handleDeleteButtonClicked:function(e){we.open(e)},handleLikeButtonClick:function(e,t,n){t.classList.contains(I)?ke.removeLike(e).then((function(e){t.classList.remove(I),n.textContent=e.likes.length>0?e.likes.length:""})).catch((function(e){return D(e,"console")})):ke.addLike(e).then((function(e){t.classList.add(I),n.textContent=e.likes.length>0?e.likes.length:""})).catch((function(e){return D(e,"console")}))}},B).createCard()}},k)).renderItems()})).then((function(){j.preloaderElement.classList.remove("preloader_active")})).catch((function(e){return D(e,"console")})),j.editProfileButton.addEventListener("click",(function(){Ee.open();var e,t,n=ge.getUserInfo();e=n.name,t=n.about,R.inputProfileName.value=e,R.inputProfileAbout.value=t,Pe.resetValidation()})),j.editAvatarButton.addEventListener("click",(function(){Se.open(),Ie.resetValidation()})),j.addCardButton.addEventListener("click",(function(){Le.open(),Oe.resetValidation()}))})()})();